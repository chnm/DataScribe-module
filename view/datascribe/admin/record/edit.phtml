<?php
$this->htmlElement('body')->appendAttribute('class', 'datascribe record edit');
$form->prepare();
?>

<?php echo $this->form()->openTag($form); ?>
<?php echo $this->formElement($form->get('csrf')); ?>
<div id="page-actions">
    <?php echo $this->cancelButton(); ?>
    <button><?php echo $this->translate('Save'); ?></button>
</div>
<?php echo $this->formRow($form->get('o-module-datascribe:needs_review')); ?>
<?php echo $this->formRow($form->get('o-module-datascribe:needs_work')); ?>
<?php echo $this->formRow($form->get('o-module-datascribe:transcriber_notes')); ?>
<?php echo $this->formRow($form->get('o-module-datascribe:reviewer_notes')); ?>

<?php foreach ($form->get('o-module-datascribe:value')->getFieldsets() as $fieldset): ?>
<fieldset>
    <?php echo sprintf('<legend>%s</legend>', $fieldset->getOption('datascribe_field_name')); ?>
    <?php echo sprintf('<p>%s</p>', $fieldset->getOption('datascribe_field_description')); ?>
    <?php echo $this->formCollection($fieldset->get('data'), false); ?>
    <?php echo $this->formRow($fieldset->get('is_missing')); ?>
    <?php echo $this->formRow($fieldset->get('is_illegible')); ?>
</fieldset>
<?php endforeach; ?>

<?php echo $this->form()->closeTag(); ?>
